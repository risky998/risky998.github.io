"use strict";var qrcodegen=new function(){function t(t,e){Object.defineProperty(this,"ordinal",{value:t}),Object.defineProperty(this,"formatBits",{value:e})}function e(t,e){Object.defineProperty(this,"modeBits",{value:t}),this.numCharCountBits=function(t){if(1<=t&&t<=9)return e[0];if(10<=t&&t<=26)return e[1];if(27<=t&&t<=40)return e[2];throw"Version number out of range"}}function r(t){t=encodeURI(t);for(var e=[],r=0;r<t.length;r++)"%"!=t.charAt(r)?e.push(t.charCodeAt(r)):(e.push(parseInt(t.substr(r+1,2),16)),r+=2);return e}function n(t){if(t<1||t>255)throw"Degree out of range";for(var e=[],r=0;r<t-1;r++)e.push(0);e.push(1);for(var o=1,r=0;r<t;r++){for(var i=0;i<e.length;i++)e[i]=n.multiply(e[i],o),i+1<e.length&&(e[i]^=e[i+1]);o=n.multiply(o,2)}this.getRemainder=function(t){var r=e.map(function(){return 0});return t.forEach(function(t){var o=t^r.shift();r.push(0);for(var i=0;i<r.length;i++)r[i]^=n.multiply(e[i],o)}),r}}function o(){this.getBytes=function(){for(var t=[];8*t.length<this.length;)t.push(0);return this.forEach(function(e,r){t[r>>>3]|=e<<7-(7&r)}),t},this.appendBits=function(t,e){if(e<0||e>31||t>>>e!=0)throw"Value out of range";for(var r=e-1;r>=0;r--)this.push(t>>>r&1)}}this.QrCode=function(t,e,r,o){function f(t){for(var e=o.formatBits<<3|t,r=e,n=0;n<10;n++)r=r<<1^1335*(r>>>9);if(e=e<<10|r,(e^=21522)>>>15!=0)throw"Assertion error";for(n=0;n<=5;n++)l(8,n,0!=(e>>>n&1));l(8,7,0!=(e>>>6&1)),l(8,8,0!=(e>>>7&1)),l(7,8,0!=(e>>>8&1));for(n=9;n<15;n++)l(14-n,8,0!=(e>>>n&1));for(n=0;n<=7;n++)l(v-1-n,8,0!=(e>>>n&1));for(n=8;n<15;n++)l(8,v-15+n,0!=(e>>>n&1));l(8,v-8,!0)}function h(){if(!(r<7)){for(var t=r,e=0;e<12;e++)t=t<<1^7973*(t>>>11);var n=r<<12|t;if(n>>>18!=0)throw"Assertion error";for(e=0;e<18;e++){var o=0!=(n>>>e&1),i=v-11+e%3,a=Math.floor(e/3);l(i,a,o),l(a,i,o)}}}function u(t,e){for(var r=-4;r<=4;r++)for(var n=-4;n<=4;n++){var o=Math.max(Math.abs(r),Math.abs(n)),i=t+n,a=e+r;0<=i&&i<v&&0<=a&&a<v&&l(i,a,2!=o&&4!=o)}}function c(t,e){for(var r=-2;r<=2;r++)for(var n=-2;n<=2;n++)l(t+n,e+r,1!=Math.max(Math.abs(r),Math.abs(n)))}function l(t,e,r){E[e][t]=r,p[e][t]=!0}function g(t){if(t<0||t>7)throw"Mask value out of range";for(var e=0;e<v;e++)for(var r=0;r<v;r++){var n;switch(t){case 0:n=(r+e)%2==0;break;case 1:n=e%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+e)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(e/2))%2==0;break;case 5:n=r*e%2+r*e%3==0;break;case 6:n=(r*e%2+r*e%3)%2==0;break;case 7:n=((r+e)%2+r*e%3)%2==0;break;default:throw"Assertion error"}E[e][r]^=n&!p[e][r]}}if(e<-1||e>7)throw"Mask value out of range";if(r<i||r>a)throw"Version value out of range";for(var v=4*r+17,d=[],m=0;m<v;m++)d.push(!1);for(var E=[],p=[],m=0;m<v;m++)E.push(d.slice()),p.push(d.slice());if(function(){for(n=0;n<v;n++)l(6,n,n%2==0),l(n,6,n%2==0);u(3,3),u(v-4,3),u(3,v-4);for(var t=s.getAlignmentPatternPositions(r),e=t.length,n=0;n<e;n++)for(var o=0;o<e;o++)0==n&&0==o||0==n&&o==e-1||n==e-1&&0==o||c(t[n],t[o]);f(0),h()}(),function(t){if(t.length!=Math.floor(s.getNumRawDataModules(r)/8))throw"Invalid argument";for(var e=0,n=v-1;n>=1;n-=2){6==n&&(n=5);for(var o=0;o<v;o++)for(var i=0;i<2;i++){var a=n-i,f=0==(n+1&2)?v-1-o:o;!p[f][a]&&e<8*t.length&&(E[f][a]=0!=(t[e>>>3]>>>7-(7&e)&1),e++)}}if(e!=8*t.length)throw"Assertion error"}(function(t){if(t.length!=s.getNumDataCodewords(r,o))throw"Invalid argument";for(var e=s.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][r],i=s.ECC_CODEWORDS_PER_BLOCK[o.ordinal][r],a=Math.floor(s.getNumRawDataModules(r)/8),f=e-a%e,h=Math.floor(a/e),u=[],c=new n(i),l=0,g=0;l<e;l++){var v=t.slice(g,g+h-i+(l<f?0:1));g+=v.length;var d=c.getRemainder(v);l<f&&v.push(0),d.forEach(function(t){v.push(t)}),u.push(v)}for(var m=[],l=0;l<u[0].length;l++)for(var E=0;E<u.length;E++)(l!=h-i||E>=f)&&m.push(u[E][l]);if(m.length!=a)throw"Assertion error";return m}(t)),-1==e)for(var w=1/0,m=0;m<8;m++){f(m),g(m);var C=function(){for(var t=0,e=0;e<v;e++)for(var r,n,o=0;o<v;o++)0==o||E[e][o]!=n?(n=E[e][o],r=1):5==++r?t+=s.PENALTY_N1:r>5&&t++;for(o=0;o<v;o++)for(var i,a,e=0;e<v;e++)0==e||E[e][o]!=a?(a=E[e][o],i=1):5==++i?t+=s.PENALTY_N1:i>5&&t++;for(e=0;e<v-1;e++)for(o=0;o<v-1;o++){var f=E[e][o];f==E[e][o+1]&&f==E[e+1][o]&&f==E[e+1][o+1]&&(t+=s.PENALTY_N2)}for(e=0;e<v;e++)for(var o=0,h=0;o<v;o++)h=h<<1&2047|(E[e][o]?1:0),o>=10&&(93==h||1488==h)&&(t+=s.PENALTY_N3);for(o=0;o<v;o++)for(var e=0,h=0;e<v;e++)h=h<<1&2047|(E[e][o]?1:0),e>=10&&(93==h||1488==h)&&(t+=s.PENALTY_N3);var u=0;E.forEach(function(t){t.forEach(function(t){t&&u++})});for(var c=v*v,l=0;20*u<(9-l)*c||20*u>(11+l)*c;l++)t+=s.PENALTY_N4;return t}();C<w&&(e=m,w=C),g(m)}if(e<0||e>7)throw"Assertion error";f(e),g(e),Object.defineProperty(this,"version",{value:r}),Object.defineProperty(this,"size",{value:v}),Object.defineProperty(this,"errorCorrectionLevel",{value:o}),Object.defineProperty(this,"mask",{value:e}),this.getModule=function(t,e){return 0<=t&&t<v&&0<=e&&e<v&&E[e][t]},this.isFunctionModule=function(t,e){return 0<=t&&t<v&&0<=e&&e<v&&p[e][t]},this.drawCanvas=function(t,e,r){if(t<=0||e<0)throw"Value out of range";var n=(v+2*e)*t;r.width=n,r.height=n;for(var o=r.getContext("2d"),i=-e;i<v+e;i++)for(var a=-e;a<v+e;a++)o.fillStyle=this.getModule(a,i)?"#000000":"#FFFFFF",o.fillRect((a+e)*t,(i+e)*t,t,t)},this.toSvgString=function(t){if(t<0)throw"Border must be non-negative";var e='<?xml version="1.0" encoding="UTF-8"?>\n';e+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n',e+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+(v+2*t)+" "+(v+2*t)+'" stroke="none">\n',e+='\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n',e+='\t<path d="';for(var r=!0,n=-t;n<v+t;n++)for(var o=-t;o<v+t;o++)this.getModule(o,n)&&(r?r=!1:e+=" ",e+="M"+(o+t)+","+(n+t)+"h1v1h-1z");return e+='" fill="#000000"/>\n',e+="</svg>\n"}},this.QrCode.encodeText=function(t,e){var r=qrcodegen.QrSegment.makeSegments(t);return this.encodeSegments(r,e)},this.QrCode.encodeBinary=function(t,e){var r=qrcodegen.QrSegment.makeBytes(t);return this.encodeSegments([r],e)},this.QrCode.encodeSegments=function(t,e,r,n,f,h){if(void 0==r&&(r=i),void 0==n&&(n=a),void 0==f&&(f=-1),void 0==h&&(h=!0),!(i<=r&&r<=n&&n<=a)||f<-1||f>7)throw"Invalid value";var u,c;for(u=r;;u++){l=8*s.getNumDataCodewords(u,e);if(null!=(c=qrcodegen.QrSegment.getTotalBits(t,u))&&c<=l)break;if(u>=n)throw"Data too long"}[this.Ecc.MEDIUM,this.Ecc.QUARTILE,this.Ecc.HIGH].forEach(function(t){h&&c<=8*s.getNumDataCodewords(u,t)&&(e=t)});var l=8*s.getNumDataCodewords(u,e),g=new o;t.forEach(function(t){g.appendBits(t.mode.modeBits,4),g.appendBits(t.numChars,t.mode.numCharCountBits(u)),t.getBits().forEach(function(t){g.push(t)})}),g.appendBits(0,Math.min(4,l-g.length)),g.appendBits(0,(8-g.length%8)%8);for(var v=236;g.length<l;v^=253)g.appendBits(v,8);if(g.length%8!=0)throw"Assertion error";return new this(g.getBytes(),f,u,e)};var i=1,a=40;Object.defineProperty(this.QrCode,"MIN_VERSION",{value:i}),Object.defineProperty(this.QrCode,"MAX_VERSION",{value:a});var s={};s.getAlignmentPatternPositions=function(t){if(t<i||t>a)throw"Version number out of range";if(1==t)return[];var e,r=4*t+17,n=Math.floor(t/7)+2;e=32!=t?2*Math.ceil((r-13)/(2*n-2)):26;for(var o=[6],s=0,f=r-7;s<n-1;s++,f-=e)o.splice(1,0,f);return o},s.getNumRawDataModules=function(t){if(t<i||t>a)throw"Version number out of range";var e=(16*t+128)*t+64;if(t>=2){var r=Math.floor(t/7)+2;e-=(25*r-10)*r-55,t>=7&&(e-=36)}return e},s.getNumDataCodewords=function(t,e){if(t<i||t>a)throw"Version number out of range";return Math.floor(s.getNumRawDataModules(t)/8)-s.ECC_CODEWORDS_PER_BLOCK[e.ordinal][t]*s.NUM_ERROR_CORRECTION_BLOCKS[e.ordinal][t]},s.PENALTY_N1=3,s.PENALTY_N2=3,s.PENALTY_N3=40,s.PENALTY_N4=10,s.ECC_CODEWORDS_PER_BLOCK=[[null,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[null,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[null,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[null,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],s.NUM_ERROR_CORRECTION_BLOCKS=[[null,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[null,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[null,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[null,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],this.QrCode.Ecc={LOW:new t(0,1),MEDIUM:new t(1,0),QUARTILE:new t(2,3),HIGH:new t(3,2)},this.QrSegment=function(t,r,n){if(r<0||!(t instanceof e))throw"Invalid argument";n=n.slice(),Object.defineProperty(this,"mode",{value:t}),Object.defineProperty(this,"numChars",{value:r}),this.getBits=function(){return n.slice()}},this.QrSegment.makeBytes=function(t){var e=new o;return t.forEach(function(t){e.appendBits(t,8)}),new this(this.Mode.BYTE,t.length,e)},this.QrSegment.makeNumeric=function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";var e,r=new o;for(e=0;e+3<=t.length;e+=3)r.appendBits(parseInt(t.substr(e,3),10),10);var n=t.length-e;return n>0&&r.appendBits(parseInt(t.substring(e),10),3*n+1),new this(this.Mode.NUMERIC,t.length,r)},this.QrSegment.makeAlphanumeric=function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var e,r=new o;for(e=0;e+2<=t.length;e+=2){var n=45*f.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e));n+=f.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e+1)),r.appendBits(n,11)}return e<t.length&&r.appendBits(f.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e)),6),new this(this.Mode.ALPHANUMERIC,t.length,r)},this.QrSegment.makeSegments=function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[this.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[this.makeAlphanumeric(t)]:[this.makeBytes(r(t))]},this.QrSegment.makeEci=function(t){var e=new o;if(0<=t&&t<128)e.appendBits(t,8);else if(128<=t&&t<16384)e.appendBits(2,2),e.appendBits(t,14);else{if(!(16384<=t&&t<1e6))throw"ECI assignment value out of range";e.appendBits(6,3),e.appendBits(t,21)}return new this(this.Mode.ECI,0,e)},this.QrSegment.getTotalBits=function(t,e){if(e<i||e>a)throw"Version number out of range";for(var r=0,n=0;n<t.length;n++){var o=t[n],s=o.mode.numCharCountBits(e);if(o.numChars>=1<<s)return null;r+=4+s+o.getBits().length}return r};var f={};this.QrSegment.NUMERIC_REGEX=/^[0-9]*$/,this.QrSegment.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",this.QrSegment.Mode={NUMERIC:new e(1,[10,12,14]),ALPHANUMERIC:new e(2,[9,11,13]),BYTE:new e(4,[8,16,16]),KANJI:new e(8,[8,10,12]),ECI:new e(7,[0,0,0])},n.multiply=function(t,e){if(t>>>8!=0||e>>>8!=0)throw"Byte out of range";for(var r=0,n=7;n>=0;n--)r=r<<1^285*(r>>>7),r^=(e>>>n&1)*t;if(r>>>8!=0)throw"Assertion error";return r},o.prototype=Object.create(Array.prototype)};
